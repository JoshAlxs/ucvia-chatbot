<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UCVia Chatbot</title>
<style>
    body { font-family: Arial; background: #f5f5f5; margin: 0; padding: 0; display: flex; flex-direction: column; align-items: center; height: 100vh; }
    #chat-box { width: 90%; max-width: 600px; height: 70vh; background: white; border-radius: 10px; padding: 10px; overflow-y: auto; margin-top: 20px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    .user { color: #007bff; margin: 5px 0; }
    .bot { color: #28a745; margin: 5px 0; }
    form { display: flex; width: 90%; max-width: 600px; margin-top: 10px; }
    input { flex: 1; padding: 10px; border-radius: 5px; border: 1px solid #ccc; }
    button { background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px; margin-left: 5px; cursor: pointer; }
</style>
</head>
<body>
<h2>ðŸ’¬ Chat con UCVia</h2>
<div id="chat-box"></div>
<form id="chat-form">
    <input id="message" type="text" placeholder="Escribe un mensaje..." required />
    <button type="submit">Enviar</button>
</form>

<script>
    const form = document.getElementById("chat-form");
    const chatBox = document.getElementById("chat-box");

    form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const message = document.getElementById("message").value;
    chatBox.innerHTML += `<div class='user'><b>TÃº:</b> ${message}</div>`;
    document.getElementById("message").value = "";
    
    const response = await fetch("/chat", {
        method: "POST",
        body: new URLSearchParams({ message }),
    });

    const data = await response.json();
    chatBox.innerHTML += `<div class='bot'><b>UCVia:</b> ${data.response}</div>`;
    chatBox.scrollTop = chatBox.scrollHeight;
    });
</script>
</body>
</html>
